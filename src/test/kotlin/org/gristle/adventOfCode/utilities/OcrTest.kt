package org.gristle.adventOfCode.utilities

import kotlin.test.Test
import kotlin.test.assertTrue

class OcrTest {
    @Test
    internal fun size6Test() {
        val output = "ABCEFGHIJKLOPRSUYZ"
        val letterForms = """
    .##..###...##..####.####..##..#..#.###...##.#..#.#.....##..###..###...###.#..#.#...#.####
    #..#.#..#.#..#.#....#....#..#.#..#..#.....#.#.#..#....#..#.#..#.#..#.#....#..#.#...#....#
    #..#.###..#....###..###..#....####..#.....#.##...#....#..#.#..#.#..#.#....#..#..#.#....#.
    ####.#..#.#....#....#....#.##.#..#..#.....#.#.#..#....#..#.###..###...##..#..#...#....#..
    #..#.#..#.#..#.#....#....#..#.#..#..#..#..#.#.#..#....#..#.#....#.#.....#.#..#...#...#...
    #..#.###...##..####.#.....###.#..#.###..##..#..#.####..##..#....#..#.###...##....#...####
""".trimIndent()

        assertTrue(ocrTest(output, letterForms))
    }

    @Test
    internal fun size10Test() {
        val output = "ABCEFGHJKLNPRXZ"
        val letterForms = """
    ..##...#####...####..######.######..####..#....#....###.#....#.#......#....#.#####..#####..#....#.######
    .#..#..#....#.#....#.#......#......#....#.#....#.....#..#...#..#......##...#.#....#.#....#.#....#......#
    #....#.#....#.#......#......#......#......#....#.....#..#..#...#......##...#.#....#.#....#..#..#.......#
    #....#.#....#.#......#......#......#......#....#.....#..#.#....#......#.#..#.#....#.#....#..#..#......#.
    #....#.#####..#......#####..#####..#......######.....#..##.....#......#.#..#.#####..#####....##......#..
    ######.#....#.#......#......#......#..###.#....#.....#..##.....#......#..#.#.#......#..#.....##.....#...
    #....#.#....#.#......#......#......#....#.#....#.....#..#.#....#......#..#.#.#......#...#...#..#...#....
    #....#.#....#.#......#......#......#....#.#....#.#...#..#..#...#......#...##.#......#...#...#..#..#.....
    #....#.#....#.#....#.#......#......#...##.#....#.#...#..#...#..#......#...##.#......#....#.#....#.#.....
    #....#.#####...####..######.#.......###.#.#....#..###...#....#.######.#....#.#......#....#.#....#.######
""".trimIndent()

        assertTrue(ocrTest(output, letterForms))
    }

    @Test
    internal fun yBugTest() {
        val output = "LGYHB"
        val letterForms = """
            #.....##..#...##..#.###..
            #....#..#.#...##..#.#..#.
            #....#.....#.#.####.###..
            #....#.##...#..#..#.#..#.
            #....#..#...#..#..#.#..#.
            ####..###...#..#..#.###..
        """.trimIndent()

        assertTrue(ocrTest(output, letterForms))
    }

    companion object {
        fun ocrTest(output: String, letterForms: String): Boolean = output == letterForms.ocr('.')
    }
}